<% layout("public/layouts/boilerplate") %>
<div class="row">
  <div class="col-8">
    <h1>Create New Listing</h1>
    <form
      action="/listings"
      method="post"
      novalidate
      class="needs-validation"
      enctype="multipart/form-data"
    >
      <!-- Title -->
      <div class="mb-3">
        <label for="title" class="form-label">Title:</label>
        <input
          type="text"
          name="Listing[title]"
          class="form-control"
          id="title"
          required
        />
        <div class="valid-feedback">Data saved successfully!</div>
        <div class="invalid-feedback">Enter a valid title</div>
      </div>

      <!-- Description -->
      <div class="mb-3">
        <label for="description" class="form-label">Description:</label>
        <textarea
          name="Listing[description]"
          class="form-control"
          id="description"
          required
        ></textarea>
        <div class="valid-feedback">Data saved successfully!</div>
        <div class="invalid-feedback">Enter a valid description</div>
      </div>

      <!-- Image Upload -->
      <div class="mb-3">
        <label for="image" class="form-label">Upload Image:</label>
        <input
          type="file"
          name="Listing[image][url]"
          class="form-control"
          id="image"
          required
        />
        <div class="valid-feedback">Image uploaded successfully!</div>
        <div class="invalid-feedback">Please upload a valid image</div>
      </div>

      <!-- Price and Location -->
      <div class="row">
        <div class="mb-3 col-md-4">
          <label for="price" class="form-label">Price:</label>
          <input
            type="number"
            name="Listing[price]"
            class="form-control"
            id="price"
            min="0"
            required
          />
          <div class="valid-feedback">Price added!</div>
          <div class="invalid-feedback">Enter a valid price</div>
        </div>

        <div class="mb-3 col-md-8">
          <label for="location" class="form-label">Location:</label>
          <input
            placeholder="City, District"
            type="text"
            name="Listing[location]"
            class="form-control"
            id="location"
            required
          />
          <div class="valid-feedback">Location added!</div>
          <div class="invalid-feedback">Enter a valid location</div>
        </div>
      </div>

      <!-- Country -->
      <div class="mb-3">
        <label for="country" class="form-label">Country:</label>
        <input
          placeholder="Country"
          type="text"
          name="Listing[country]"
          class="form-control"
          id="country"
          required
        />
        <div class="valid-feedback">Country added!</div>
        <div class="invalid-feedback">Enter a valid country</div>
      </div>

      <!-- Category Dropdown -->
      <div class="mb-3">
        <label for="category" class="form-label">Category:</label>
        <select
          name="Listing[category]"
          id="category"
          class="form-select"
          required
        >
          <option value="" disabled selected>Choose a category</option>
          <option value="Beach">Beach</option>
          <option value="Hills">Hills</option>
          <option value="Desert">Desert</option>
          <option value="Historic">Historic</option>
          <option value="Culture">Culture</option>
          <option value="Adventure">Adventure</option>
          <option value="Wildlife">Wildlife</option>
          <option value="City">City</option>
          <option value="Rural">Rural</option>
          <option value="Winter">Winter</option>
          <option value="Wellness">Wellness</option>
          <option value="Food">Food</option>
          <option value="Cruise">Cruise</option>
          <option value="Festivals">Festivals</option>
          <option value="Luxury">Luxury</option>
          <option value="Budget">Budget</option>
          <option value="Road_Trips">Road Trips</option>
        </select>
        <div class="valid-feedback">Category selected!</div>
        <div class="invalid-feedback">Please choose a category</div>
      </div>

      <!-- Submit Button -->
      <button class="btn btn-dark mb-3">Add</button>
      <br />
    </form>
  </div>
</div>

<!-- Bootstrap validation script -->
<script>
  (() => {
    "use strict";
    const forms = document.querySelectorAll(".needs-validation");
    Array.from(forms).forEach((form) => {
      form.addEventListener(
        "submit",
        (event) => {
          if (!form.checkValidity()) {
            event.preventDefault();
            event.stopPropagation();
          }
          form.classList.add("was-validated");
        },
        false
      );
    });
  })();
</script>
